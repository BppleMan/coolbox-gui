{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Cool2",
  "type": "object",
  "required": [
    "description",
    "identifier",
    "name"
  ],
  "properties": {
    "description": {
      "type": "string"
    },
    "identifier": {
      "type": "string"
    },
    "linux": {
      "default": null,
      "anyOf": [
        {
          "$ref": "#/definitions/Platform"
        },
        {
          "type": "null"
        }
      ]
    },
    "macos": {
      "default": null,
      "anyOf": [
        {
          "$ref": "#/definitions/Platform"
        },
        {
          "type": "null"
        }
      ]
    },
    "name": {
      "type": "string"
    },
    "windows": {
      "default": null,
      "anyOf": [
        {
          "$ref": "#/definitions/Platform"
        },
        {
          "type": "null"
        }
      ]
    }
  },
  "definitions": {
    "Apt": {
      "type": "null"
    },
    "Bash": {
      "type": "null"
    },
    "Brew": {
      "type": "null"
    },
    "Cargo": {
      "type": "null"
    },
    "CheckTask": {
      "type": "object",
      "required": [
        "installer",
        "name"
      ],
      "properties": {
        "installer": {
          "$ref": "#/definitions/Installer"
        },
        "name": {
          "type": "string"
        }
      }
    },
    "Cmd": {
      "type": "null"
    },
    "CommandTask": {
      "type": "object",
      "required": [
        "script",
        "shell"
      ],
      "properties": {
        "envs": {
          "default": null,
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "array",
            "items": [
              {
                "type": "string"
              },
              {
                "type": "string"
              }
            ],
            "maxItems": 2,
            "minItems": 2
          }
        },
        "script": {
          "type": "string"
        },
        "shell": {
          "$ref": "#/definitions/Shell"
        }
      }
    },
    "CompressTask": {
      "type": "object",
      "required": [
        "dest",
        "src"
      ],
      "properties": {
        "dest": {
          "type": "string"
        },
        "src": {
          "type": "string"
        }
      }
    },
    "CoolDependency": {
      "type": "object",
      "required": [
        "name",
        "version"
      ],
      "properties": {
        "name": {
          "type": "string"
        },
        "version": {
          "$ref": "#/definitions/CoolVersion"
        }
      }
    },
    "CoolFormula": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "PackageManager"
          ],
          "properties": {
            "PackageManager": {
              "$ref": "#/definitions/PackageManager"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Manual"
          ],
          "properties": {
            "Manual": {
              "$ref": "#/definitions/Manual"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "CoolVersion": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Latest"
          ]
        },
        {
          "type": "object",
          "required": [
            "Specific"
          ],
          "properties": {
            "Specific": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "CopyTask": {
      "type": "object",
      "required": [
        "dest",
        "src"
      ],
      "properties": {
        "dest": {
          "type": "string"
        },
        "src": {
          "type": "string"
        }
      }
    },
    "DecompressTask": {
      "type": "object",
      "required": [
        "dest",
        "src"
      ],
      "properties": {
        "dest": {
          "type": "string"
        },
        "src": {
          "type": "string"
        }
      }
    },
    "DeleteTask": {
      "type": "object",
      "required": [
        "path"
      ],
      "properties": {
        "path": {
          "type": "string"
        }
      }
    },
    "Dnf": {
      "type": "null"
    },
    "DownloadTask": {
      "type": "object",
      "required": [
        "dest",
        "url"
      ],
      "properties": {
        "dest": {
          "type": "string"
        },
        "url": {
          "type": "string"
        }
      }
    },
    "EnvCommand": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Export"
          ],
          "properties": {
            "Export": {
              "$ref": "#/definitions/EnvVar"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Unset"
          ],
          "properties": {
            "Unset": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "AppendPath"
          ],
          "properties": {
            "AppendPath": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "RemovePath"
          ],
          "properties": {
            "RemovePath": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "AddSource"
          ],
          "properties": {
            "AddSource": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "RemoveSource"
          ],
          "properties": {
            "RemoveSource": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "EnvTask": {
      "type": "object",
      "required": [
        "command"
      ],
      "properties": {
        "command": {
          "$ref": "#/definitions/EnvCommand"
        }
      }
    },
    "EnvVar": {
      "type": "object",
      "required": [
        "key",
        "value"
      ],
      "properties": {
        "key": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      }
    },
    "ExistsTask": {
      "type": "object",
      "required": [
        "path"
      ],
      "properties": {
        "path": {
          "type": "string"
        }
      }
    },
    "GitCheckout": {
      "type": "object",
      "required": [
        "branch",
        "create",
        "src"
      ],
      "properties": {
        "branch": {
          "type": "string"
        },
        "create": {
          "type": "boolean"
        },
        "src": {
          "type": "string"
        }
      }
    },
    "GitClone": {
      "type": "object",
      "required": [
        "dest",
        "url"
      ],
      "properties": {
        "dest": {
          "type": "string"
        },
        "url": {
          "type": "string"
        }
      }
    },
    "GitCommand": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Clone"
          ],
          "properties": {
            "Clone": {
              "$ref": "#/definitions/GitClone"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Pull"
          ],
          "properties": {
            "Pull": {
              "$ref": "#/definitions/GitPull"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Checkout"
          ],
          "properties": {
            "Checkout": {
              "$ref": "#/definitions/GitCheckout"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "GitPull": {
      "type": "object",
      "required": [
        "src"
      ],
      "properties": {
        "src": {
          "type": "string"
        }
      }
    },
    "GitTask": {
      "type": "object",
      "required": [
        "command"
      ],
      "properties": {
        "command": {
          "$ref": "#/definitions/GitCommand"
        }
      }
    },
    "InstallTask": {
      "type": "object",
      "required": [
        "installer",
        "name"
      ],
      "properties": {
        "args": {
          "default": null,
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          }
        },
        "envs": {
          "default": null,
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "array",
            "items": [
              {
                "type": "string"
              },
              {
                "type": "string"
              }
            ],
            "maxItems": 2,
            "minItems": 2
          }
        },
        "installer": {
          "$ref": "#/definitions/Installer"
        },
        "name": {
          "type": "string"
        }
      }
    },
    "Installer": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Brew"
          ],
          "properties": {
            "Brew": {
              "$ref": "#/definitions/Brew"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Cargo"
          ],
          "properties": {
            "Cargo": {
              "$ref": "#/definitions/Cargo"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Apt"
          ],
          "properties": {
            "Apt": {
              "$ref": "#/definitions/Apt"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Yun"
          ],
          "properties": {
            "Yun": {
              "$ref": "#/definitions/Yum"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Dnf"
          ],
          "properties": {
            "Dnf": {
              "$ref": "#/definitions/Dnf"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Rpm"
          ],
          "properties": {
            "Rpm": {
              "$ref": "#/definitions/Rpm"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "WinGet"
          ],
          "properties": {
            "WinGet": {
              "$ref": "#/definitions/WinGet"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "LinuxSudo": {
      "type": "null"
    },
    "MacOSSudo": {
      "type": "null"
    },
    "Manual": {
      "type": "object",
      "required": [
        "check_tasks",
        "install_tasks",
        "uninstall_tasks"
      ],
      "properties": {
        "check_tasks": {
          "$ref": "#/definitions/Tasks"
        },
        "dependencies": {
          "default": [],
          "type": "array",
          "items": {
            "$ref": "#/definitions/CoolDependency"
          },
          "uniqueItems": true
        },
        "install_tasks": {
          "$ref": "#/definitions/Tasks"
        },
        "uninstall_tasks": {
          "$ref": "#/definitions/Tasks"
        }
      }
    },
    "MoveTask": {
      "type": "object",
      "required": [
        "dest",
        "src"
      ],
      "properties": {
        "dest": {
          "type": "string"
        },
        "src": {
          "type": "string"
        }
      }
    },
    "PackageManager": {
      "type": "object",
      "required": [
        "installer",
        "name",
        "post_install_tasks",
        "post_uninstall_tasks"
      ],
      "properties": {
        "installer": {
          "$ref": "#/definitions/Installer"
        },
        "name": {
          "type": "string"
        },
        "post_install_tasks": {
          "$ref": "#/definitions/Tasks"
        },
        "post_uninstall_tasks": {
          "$ref": "#/definitions/Tasks"
        }
      }
    },
    "Platform": {
      "type": "object",
      "required": [
        "formula"
      ],
      "properties": {
        "formula": {
          "$ref": "#/definitions/CoolFormula"
        },
        "need_restart": {
          "default": false,
          "type": "boolean"
        },
        "use_package_manager": {
          "default": false,
          "type": "boolean"
        }
      }
    },
    "Rpm": {
      "type": "null"
    },
    "Sh": {
      "type": "null"
    },
    "Shell": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Bash"
          ],
          "properties": {
            "Bash": {
              "$ref": "#/definitions/Bash"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "LinuxSudo"
          ],
          "properties": {
            "LinuxSudo": {
              "$ref": "#/definitions/LinuxSudo"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "MacOSSudo"
          ],
          "properties": {
            "MacOSSudo": {
              "$ref": "#/definitions/MacOSSudo"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Sh"
          ],
          "properties": {
            "Sh": {
              "$ref": "#/definitions/Sh"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Zsh"
          ],
          "properties": {
            "Zsh": {
              "$ref": "#/definitions/Zsh"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Cmd"
          ],
          "properties": {
            "Cmd": {
              "$ref": "#/definitions/Cmd"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "Task": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "CheckTask"
          ],
          "properties": {
            "CheckTask": {
              "$ref": "#/definitions/CheckTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "CommandTask"
          ],
          "properties": {
            "CommandTask": {
              "$ref": "#/definitions/CommandTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "CompressTask"
          ],
          "properties": {
            "CompressTask": {
              "$ref": "#/definitions/CompressTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "CopyTask"
          ],
          "properties": {
            "CopyTask": {
              "$ref": "#/definitions/CopyTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "DecompressTask"
          ],
          "properties": {
            "DecompressTask": {
              "$ref": "#/definitions/DecompressTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "DeleteTask"
          ],
          "properties": {
            "DeleteTask": {
              "$ref": "#/definitions/DeleteTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "DownloadTask"
          ],
          "properties": {
            "DownloadTask": {
              "$ref": "#/definitions/DownloadTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "EnvTask"
          ],
          "properties": {
            "EnvTask": {
              "$ref": "#/definitions/EnvTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "ExistsTask"
          ],
          "properties": {
            "ExistsTask": {
              "$ref": "#/definitions/ExistsTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "GitTask"
          ],
          "properties": {
            "GitTask": {
              "$ref": "#/definitions/GitTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "InstallTask"
          ],
          "properties": {
            "InstallTask": {
              "$ref": "#/definitions/InstallTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "MoveTask"
          ],
          "properties": {
            "MoveTask": {
              "$ref": "#/definitions/MoveTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "UninstallTask"
          ],
          "properties": {
            "UninstallTask": {
              "$ref": "#/definitions/UninstallTask"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "WhichTask"
          ],
          "properties": {
            "WhichTask": {
              "$ref": "#/definitions/WhichTask"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "Tasks": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Task"
      }
    },
    "UninstallTask": {
      "type": "object",
      "required": [
        "installer",
        "name"
      ],
      "properties": {
        "args": {
          "default": null,
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          }
        },
        "installer": {
          "$ref": "#/definitions/Installer"
        },
        "name": {
          "type": "string"
        }
      }
    },
    "WhichTask": {
      "type": "object",
      "required": [
        "command"
      ],
      "properties": {
        "command": {
          "type": "string"
        }
      }
    },
    "WinGet": {
      "type": "null"
    },
    "Yum": {
      "type": "null"
    },
    "Zsh": {
      "type": "null"
    }
  }
}